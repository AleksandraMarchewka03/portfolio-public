const translations = {
  en: {
    name: "Aleksandra Marchewka",
    home: "Home",
    allProjects: "All Projects",
    contact: "Contact",
    settings: "Settings",
    colorMode: "Color Mode",
    darkMode: "Dark Mode",
    lightMode: "Light Mode",
    language: "Language",
    greeting: "Hello! I am Aleksandra Marchewka. I am a Software Developer.",
    bio: "I've been coding since I was 13 and recently finished my undergraduate degree in computer science. I have an interest in fullstack development and machine learning.",
    seeMyWork: "See my work",
    checkResume: "Check Out My Resume",
    myStack: "My Stack",
    recentWork: "Recent Work",
    recentWorkText: "Currently I am refactoring and improving my projects from university. Links to completed work will be added shortly.",
    proj1Title: "Emotion-Driven Unity Game",
    proj1Desc: "Dissertation project combining facial emotion detection, eye tracking and speech recognition to drive adaptive gameplay in Unity.",
    proj2Title: "Android Trivia App",
    proj2Desc: "Mobile trivia game with randomised questions, scoring feedback, and external REST API integration. Tested across multiple devices.",
    proj3Title: "Web Forum Application",
    proj3Desc: "Full-stack forum platform with authentication, posting, commenting, and admin/moderation features. Containerised with Docker.",
    proj4Title: "Object Recognition (CIFAR-100)",
    proj4Desc: "Image recognition pipeline achieving over 70% accuracy on the CIFAR-100 dataset, built using Java and computer vision techniques.",
    viewProject: "View Project",
    viewDetails: "View Details",
    searchPlaceholder: "Search projects...",
    proj5Title: "2D Game in Unity",
    proj5Desc: "Designed and implemented a 2D game featuring physics-based mechanics and dynamic enemy behaviour, scripted in C#.",
    proj6Title: "2D Jewel Chase Game",
    proj6Desc: "Team project building a 2D desktop game with animations, scoring, and smooth UX. Used Git for version control and collaboration.",
    cvTitle: "My Resume",
    downloadResume: "Download Resume",
    downloadEnglish: "Download English Version",
    downloadPolish: "Download Polish Version",
    linkedin: "LinkedIn",
    cv: "CV",
    github: "GitHub",
    copyright: "¬© 2025 Aleksandra Marchewka",
    languageNotice: "üåê Available in English and Polish",
    // Contact page
    contactTaglinePart1: "BSc Computer Science ¬∑ Swansea University ¬∑ 2:1 Hons",
    contactTaglinePart2: "Based in London ¬∑ Open to relocation to Poland",
    contactTagline: "BSc Computer Science ¬∑ Swansea University ¬∑ 2:1 Hons ¬∑ Based in London ¬∑ Open to relocation to Poland",
    formNamePlaceholder: "Jane Smith",
    formEmailPlaceholder: "jane@example.com",
    formContactPlaceholder: "Phone number, LinkedIn URL‚Ä¶",
    formMessagePlaceholder: "Hi Aleksandra, I'd love to chat about‚Ä¶",
    contactLocation: "London N4, UK",
    contactRelocation: "Open to relocation to Krak√≥w / Warsaw, Poland",
    contactUni: "Swansea University",
    contactDegree: "Computer Science BSc ¬∑ 2:1 with Honours",
    pleaseText: "please text",
    getInTouch: "Get in touch",
    formName: "Your name",
    formEmail: "Your email",
    formContact: "Best way to reach you back",
    formOptional: "(optional)",
    formMessage: "Message",
    sendMessage: "Send Message",
  },
  pl: {
    name: "Aleksandra Marchewka",
    home: "Strona G≈Ç√≥wna",
    allProjects: "Wszystkie Projekty",
    contact: "Kontakt",
    settings: "Ustawienia",
    colorMode: "Tryb Kolor√≥w",
    darkMode: "Tryb Ciemny",
    lightMode: "Tryb Jasny",
    language: "Jƒôzyk",
    greeting: "Cze≈õƒá! Jestem Aleksandra Marchewka. Jestem ProgramistkƒÖ.",
    bio: "Programujƒô od 13 roku ≈ºycia i niedawno uko≈Ñczy≈Çam studia licencjackie z informatyki. Interesujƒô siƒô programowaniem full-stack i uczeniem maszynowym.",
    seeMyWork: "Zobacz moje prace",
    checkResume: "Sprawd≈∫ moje CV",
    myStack: "M√≥j Stack",
    recentWork: "Ostatnie Prace",
    recentWorkText: "Obecnie refaktoryzujƒô i ulepszam moje projekty z uniwersytetu. Linki do uko≈Ñczonych prac zostanƒÖ dodane wkr√≥tce.",
    proj1Title: "Gra Unity sterowana emocjami",
    proj1Desc: "Projekt dyplomowy ≈ÇƒÖczƒÖcy detekcjƒô emocji twarzy, ≈õledzenie wzroku i rozpoznawanie mowy w celu adaptacyjnej rozgrywki w Unity.",
    proj2Title: "Aplikacja trivia na Androida",
    proj2Desc: "Mobilna gra trivia z losowymi pytaniami, ocenƒÖ wynik√≥w i integracjƒÖ z zewnƒôtrznymi API REST. Testowana na wielu urzƒÖdzeniach.",
    proj3Title: "Forum internetowe",
    proj3Desc: "Pe≈Çnoprawna platforma forum z uwierzytelnianiem, publikowaniem, komentowaniem i funkcjami moderacji. Skonteneryzowana z Dockerem.",
    proj4Title: "Rozpoznawanie obiekt√≥w (CIFAR-100)",
    proj4Desc: "Pipeline rozpoznawania obraz√≥w osiƒÖgajƒÖcy ponad 70% dok≈Çadno≈õci na zbiorze CIFAR-100, zbudowany w Javie z technikami computer vision.",
    viewProject: "Zobacz Projekt",
    viewDetails: "Zobacz Szczeg√≥≈Çy",
    searchPlaceholder: "Szukaj projekt√≥w...",
    proj5Title: "Gra 2D w Unity",
    proj5Desc: "Projektowanie i implementacja gry 2D z mechanikƒÖ opartƒÖ na fizyce i dynamicznymi zachowaniami przeciwnik√≥w, skryptowanej w C#.",
    proj6Title: "Gra 2D Jewel Chase",
    proj6Desc: "Projekt zespo≈Çowy ‚Äî gra desktopowa 2D z animacjami, punktacjƒÖ i p≈Çynnym UX. Kontrola wersji i wsp√≥≈Çpraca przez Git.",
    cvTitle: "Moje CV",
    downloadResume: "Pobierz CV",
    downloadEnglish: "Pobierz Wersjƒô AngielskƒÖ",
    downloadPolish: "Pobierz Wersjƒô PolskƒÖ",
    linkedin: "LinkedIn",
    cv: "CV",
    github: "GitHub",
    copyright: "¬© 2025 Aleksandra Marchewka",
    languageNotice: "üåê Dostƒôpne po angielsku i po polsku",
    // Contact page
  
    formNamePlaceholder: "Jan Kowalski",
    formEmailPlaceholder: "jan@przyk≈Çad.pl",
    formContactPlaceholder: "Numer telefonu, LinkedIn URL‚Ä¶",
    formMessagePlaceholder: "Cze≈õƒá Aleksandro, chcia≈Çbym/chcia≈Çabym porozmawiaƒá o‚Ä¶",
    contactLocation: "Londyn N4, Wielka Brytania",
    contactRelocation: "Otwarta na relokacjƒô do Polski",
    contactUni: "Swansea University",
    contactDegree: "Informatyka BSc ¬∑ 2:1 z wyr√≥≈ºnieniem",
    pleaseText: "proszƒô pisaƒá SMS",
    getInTouch: "Skontaktuj siƒô",
    formName: "Twoje imiƒô",
    formEmail: "Tw√≥j adres e-mail",
    formContact: "Najlepszy spos√≥b kontaktu",
    formOptional: "(opcjonalne)",
    formMessage: "Wiadomo≈õƒá",
    sendMessage: "Wy≈õlij wiadomo≈õƒá",
  }
};

function getCurrentLanguage() {
  return localStorage.getItem('language') || 'en';
}

function setLanguage(lang) {
  localStorage.setItem('language', lang);
  applyTranslations();
}

// translation function
function applyTranslations() {
  const lang = getCurrentLanguage();
  const t = translations[lang];

  document.querySelectorAll('[data-translate]').forEach(function(el) {
    var key = el.getAttribute('data-translate');
    var val = t[key];
    if (val === undefined) return;

    // Walk child nodes and update text nodes only 
    var textNodeFound = false;
    for (var i = 0; i < el.childNodes.length; i++) {
      var node = el.childNodes[i];
      if (node.nodeType === 3) { // TEXT_NODE
        node.nodeValue = val;
        textNodeFound = true;
        break;
      }
    }
    // No text node at all: just set textContent
    if (!textNodeFound) {
      el.textContent = val;
    }
  });

  // Translate placeholders
  document.querySelectorAll('[data-translate-placeholder]').forEach(function(el) {
    var key = el.getAttribute('data-translate-placeholder');
    var val = t[key];
    if (val !== undefined) el.placeholder = val;
  });

  // Update language indicator
  var indicator = document.getElementById('current-lang');
  if (indicator) indicator.textContent = lang === 'en' ? 'EN' : 'PL';

  var langText = document.getElementById('lang-text');
  if (langText) {
    langText.innerHTML = lang === 'en' ? '<strong>ENG</strong> / PL' : 'ENG / <strong>PL</strong>';
  }

  var langToggle = document.getElementById('language-toggle');
  if (langToggle) langToggle.checked = lang === 'pl';

  document.documentElement.lang = lang;
}

// Keep updatePageLanguage as alias so script.js calling initializeLanguage still works
function updatePageLanguage() { applyTranslations(); }

var _langInitDone = false;
function initializeLanguage() {
  applyTranslations();
  if (_langInitDone) return;
  _langInitDone = true;

  var langToggle = document.getElementById('language-toggle');
  if (langToggle) {
    langToggle.addEventListener('change', function() {
      setLanguage(langToggle.checked ? 'pl' : 'en');
    });
  }
}

// Also run after full page load as a failsafe
window.addEventListener('load', applyTranslations);